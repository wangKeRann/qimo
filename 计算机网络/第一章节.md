
# 互联网概述

## 1. 互联网发展史（不重要）
### 1.1 诞生
- ARPANET 1969年
  - 特点：分组交换

### 1.2 现代互联网
- TCP/IP协议栈
- WWW诞生
- 下一代互联网

### 1.3 中国网络史
- 1987：使用网络的开始
- 1994：全功能互联
- 1997：四大网互联，CNNIC成立
- CNGI

## 2. 互联网标准（不重要）
### 2.1 标准化组织
- IEEE：底层标准
- W3C：WWW
- IETF：RFC

### 2.2 重要数据（截止到2018年）
- 世界网民：约50亿
- IPv4地址总数：约43亿
- 中国网民：约11亿
- 中国IPv4地址数：约3.3亿

## 3. 网络应用与终端
### 3.1 网络应用
- C/S应用：客户/服务器模型
- B/S应用：当客户端是一个浏览器时，浏览器/服务器模型
- P2P应用：对等通信

### 3.2 网络终端
- 接入网络
  
  - 选择某个运营商的接入网络进行接入
    1. 中国电信的公用交换电话网络(PSTN)
    2. 非对称数字用户线(ADSL)进行宽带接入
  
  - 通过有线局域网接入
  - 无线接入网络
    1. ​	IEEE 802.11网络
    2. 蜂窝移动网络
    3. 卫星网络  

### 3.3 影响感受的指标

- 吞吐量：指单位时间内通过某个网络（或信道、接口）的实际数据量，收到带宽限制、受到复杂的网络负载情况影响。

- 带宽：
  - 物理带宽(Hz) 。通信领域的一门基础学科，表示某信道允许通过的信号频带范围。
  - 数字带宽(bps)表示了信道承载数据的能力。某信道所能传送的最高数据率。

- 速率：又名数据率、比特率、数据传输频率，单位：bps

- 信道

  表示向某一方向传送信息的通道。一条通信线路在逻辑上往往对应一条发送信道和一条接收

- 吞吐量：指实际的、可测得的带宽，基本单位b/s。用户能获得的吞吐量由路径上的最小带宽决定。

  下载时间T的计算公式：
  $$
  T = C(下载文件的大小，以字节为单位)/ P（吞吐量，以比特每秒为单位)
  $$
  
- 时延：指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。有时也称为延迟或迟延。

  总时延=传输时延+传播时延+处理时延+排队时延

  - ​	传输时延：进站口

    ​	是指一台网络设备（比如终端、路由等）将待传输的比特推向链路所需要的时间。
    $$
    T = C(待传输的比特数)/ BW(链路的带宽)
    $$

  - 传播时延：高速公路

    是指将数据从链路的一端搬运到另一端所需要花费的时间，它与传播的距离和传播速度有关。
    $$
    T = D(距离)/v(传播速度)
    $$

  - 设备时延：（处理时延+排队时延）加油站

    是指数据的第一个比特达到某台设备并得到处理，知道最后一个比特离开这个设备所需要的全部时间。

  - 往返时延（RTT）：从发送方发送完数据，到发送方收到来自接收方的确认总共经历的时间。（！！！！发送方发送完）

- 丢包率：

  是指一台网络设备在一定时间内，其丢弃的报文在所处理的报文中的占比。

- 时延带宽积（带宽时延）：一条链路中，已从发送端发出但尚未到达接收端的最大比特数。用于设计最短帧长。

  时延带宽积 = 传播时延 * 带宽 单位(bit)

- 信道利用率：某个信道有百分之多少的时间是有数据通过的。

  是指信道的使用效率，可以用信道的使用时间除以一段总时间表示。

  利用率太高会导致网络拥塞

  利用率太低会浪费带宽资源。
  
  ​				信道利用率
  $$
  U = L(长度，单位是bit) / (L + 2 * BD)
  $$

## 4. 参考模型
### 4.1 相关概念
- 封装：发送方从最上层拿到信息开始，逐层增加头部，直到最下层形成底层协议数据单元的全过程称为封装，也称为打包。

- 解封装：接收方从最底层收到协议数据单元直到最上层提取出信息的全过程。

- PDU：协议数据单元

- 数据流：上三层（主要为表示层）将信息转换为某种形式和格式的数据流，主要包括加密、压缩、编码等工作。

- 数据段：传输层实体从上层接收到数据流，按照某种规格，将其切分为适合传输的数据段，每个数据段加上端头，即段首部（这是数据段的开销）

- 分组：网络层实体从上层（传输层）接收到数据段，在数据段前加上分组头，包含地址等寻路所需要的关键信息开销，形成数据分组。

- 数据帧：数据链路层实体从上层（网络层）接收到数据分组，在分组前加上帧头，通常还要在尾部加上一个用于检错的帧尾，新城数据帧。

- 比特流：物理层实体从上层（数据链路层）接收到数据帧，将其转换成比特流，再转换成电压、光、无线电测波等信号，通过传输介质传送到接收方。

- 对等通信：P2P

- 协议、服务与接口：

  服务：某层实现具体的功能

  接口：接口与服务喜喜相关，上层调用服务需要通过接口，接口位于相邻层之间。

  协议：

  协议是一组规则，规定了同层的对等实体之间交换数据单元的方法。

### 4.2 参考模型类型

### 分层模型的意义：

- 简单化
- 实现多样
- 有利于竞争
- 有利于标准化

#### OSI参考模型（7层） 国际标准化组织ISO

物联网叔会使用

- 应用层：数据流，高层接口，包含信息共享、远程文件访问等。(http协议)。以报文为单位。

- 表示层：数据流，数据表示，包含字符编码、压缩/解压缩，加密/解密。

- 会话层：数据流，协调两个节点之间的通信，建立、维护和拆除会话，会话管理。

- 传输层：提供两个端点之间的可靠数据段传输。报文段为单位。

  复用和分组：发送端几个高层实体复用一条低层的连接，在接收端再进行分用。

  其他功能：差错控制、流量控制、连接建立与释放、可靠传输管理

- 网络层：分组，构造和管理多节点网络，包括编址、路由和流量控制。分组。

  路由选择：构造并维护路由表，决定分组到达目的节点的最佳路径

  分组转发：将“分组”从合适的端口转发出去

  拥塞控制：发现网络拥塞，并采取措施缓解拥塞

  网际互联：实现异构网络互联

  其他功能：差错控制、流量控制、连接建立与释放、可靠传输管理

- 数据链路层：帧，提供两个节点间可靠的帧传送

  差错控制：检错+纠错

  流量控制：协调两个结点的速率

- 物理层：比特流，在物理介质上提供透明的比特流传输。

  需定义电路接口参数

  需定义传输信号的含义、电气特征

#### TCP/IP模型（4层）美国国防部阿帕网(ARPANET)项目的后续成果

接网叔用

- 应用层：实现特定网络应用
- 传输层：实现端到端（进程到进程）通信
- 网络层：把分组从源节点转发到目的结点
- 网络接口层：实现相邻节点之间的数据传输

#### 本课用参考模型（5层）综合前两者，便于学习
- 应用层
- 传输层
- 网络层
- 数据链路层
- 物理层

#### 实体：

在计算机网络的分层结构中，第n层中的活动元素(软件+硬件)通常称为第n层实体。不同机器上的同一层的实体称为对等实体。

#### 协议：

即网络协议，是控制对等实体之间进行通信的规则的集合，是水平的。

由语法、语义和同步三部分组成

语法：数据与控制信息的格式

语义：需要发出何种控制信息、完成何种动作及做出何种应答

同步（时序）：执行各种操作的条件、时序关系等。

#### 接口：

即同一节点内相邻两层的实体交换信息的逻辑接口，又称为服务访问点。

##### 服务：

是指下层为紧邻的上层提供的功能调用，它是垂直的。

## 5. 计算机网络相关概念
### 5.1 基本概念
- 计算机网络
  计算机网络是计算机的网络，是为了共享信息和资源，使用链路和交换设备将自治的计算机相互连接在一起的系统。

  计算机网络由若干结点和连接这些节点的链路组成。

  节点（交换设备）可以是中继器，集线器(Hub)，交换机，路由器，网关等

  链路可以是有线链路、无线链路。

- 互联网（因特网)遵循TCP/IP协议

  互联网是网络的集合，是网络的网络，是一个覆盖全球的大型计算机网络。

- 万维网

  万维网是信息资源的网络，是文本，音频，图像，视频等不同形式的资源的集合，使用超级文本标记语言(HTML)编写。

   你通过**互联网（基础设施）**连接到世界，然后使用**万维网（一种服务）**来浏览网页，而“互联网”本身就是“互连网”这个概念在全球范围内最大、最成功的实践。 

### 5.2 网络拓扑
- 星型：由中央设备实现数据的”点对点“传输；不存在”总线争用“问题。（以太网交换机连接的设备）
- 总线：数据”广播式“传输；存在”总线争用“问题（集线器连接的设备）
- 树型
- 蜂窝
- 环型：数据”广播式“传输；通过”令牌“解决总线争用问题，令牌顺环依次传递，拿到令牌者可使用总线。（令牌环网）
- 网状：分组交换。数据通过各中间节点逐一存储转发，属于“点到点”传输。（由众多路由器构建的广域网）

### 5.3 按规模分类
- 个域网(PAN)：无线技术，个人计算机
- 局域网(LAN)：以太网技术，私有网络（内网），由某个机构自己建设，用于把机构内的工作计算机和其他设备连接在一起，再通过出口网关连接到互联网上。
- 无线局域网（WLAN)：以无线的方式将PC、笔记本电脑、手持设备等终端互联在一起的计算机网络。
- 城域网(MAN)：以太网技术，是覆盖整个城市的计算机网络。（有限电视网、混合光纤同轴网(HFC)）
- 广域网(WAN)：是覆盖很大地理范围的计算机网络，有时也称外网、公网，其覆盖范围可能是一个国家、一个甚至几个洲。

### 5.4按交换技术分

- 电路交换网络(电路交换技术)

  过程：

  - 建立连接（尝试占用通信资源）
  - 通信（一直占用通信资源）
  - 释放连接（归还通信资源）

  优点：传输速率高

  缺点：建立/释放连接，需要额外的时间开销

- 电报网络 （报文交换技术）

  控制信息+用户数据 = 报文

  优点：

  - 通信前无需建立连接
  - 数据以“报文”为单位被交换节点间“存储转发”，通信线路可以灵活分配
  - 在通信时间内，两个用户无需独占整条物理线路。相比于电路交换，线路利用率更高
  - 交换节点支持“差错控制”

  缺点：

  - 报文不定长，不方便存储转发管理
  - 长报文的存储转发时间开销大、缓存开销大
  - 长报文容易出错，重传代价高

- 分组交换网络

  分组（定长） ：首部+数据，首部包括源地址，目的地址，分组号

  优点：

  - 通信前无需建立连接
  - 数据以“分组”为单位被交换节点间“存储转发”，通信线路可以灵活分配
  - 在通信时间内，两个用户无需独占一整条物理线路
  - 交换节点支持“差错控制”

  缺点：

  - 相比于报文交换，控制信息占比增加
  - 相比于电路交换，依然存在存储转发时延
  - 报文被拆分成多个分组，传输过程中可能出现失序、丢失等问题，增加处理的复杂度。

#### 5.5按照所有者分

- 公网：向公众开放的网络。
- 专网：仅供某个组织内部使用的网络。

#### 5.6按照通信方式分

- 点到点网络

  数据只会发送方”点对点“发到接收方，精准送达。

  路由

- 点到多点网络

- 广播式网络：当一台计算机发送数据分组时，广播范围内所有计算机都会收到该分组，并通过检查分组的目的地址决定是否接收该分组。

  所有的无线网络都是“广播式“

#### 5.7按照工作方式分

- 边缘网络：为人服务
- 骨干网络：提供连通性和交换服务

##### VPN：

​	虚拟专用网络，是专网的一种形式，它是在公网上搭建的专网。                                          

#### IEEE:

​	电气和电子工程师协会

#### ICMP:

​	互联网扩至消息协议

### IEEE802.1Q:

​	一种标签协议，用于跨越干线的帧标记其所在的虚拟局域网（VLAN)

### ISP:

互联网服务提供商

#### YSCS协议：

压缩传输协议

#### PDU:

协议数据单元。

对等层次之间传送的数据单位。

#### PCI:

协议控制信息。控制协议操作的信息

#### SDU:

服务数据单元，为完成上一层实体所要求的功能而传送的数据。